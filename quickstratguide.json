#!/bin/bash
# ============================================
# DARSINURSE GATEWAY - QUICK START
# Copy & Paste Step-by-Step
# ============================================

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  DARSINURSE GATEWAY - QUICK START SETUP                    â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# STEP 1: Create directory structure
echo "[1/5] Membuat struktur folder..."
mkdir -p darsinurse-gateway
cd darsinurse-gateway
mkdir -p views public

echo "âœ“ Folder created"
echo ""

# STEP 2: Initialize package.json
echo "[2/5] Setup package.json..."
npm init -y > /dev/null 2>&1

cat > package.json << 'EOF'
{
  "name": "darsinurse-gateway",
  "version": "1.0.0",
  "description": "Medical IoT Gateway dengan Web Bluetooth API",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "keywords": ["medical", "iot", "bluetooth", "healthcare"],
  "author": "Darsinurse Team",
  "license": "MIT",
  "dependencies": {
    "express": "^4.18.2",
    "express-session": "^1.17.3",
    "ejs": "^3.1.9",
    "body-parser": "^1.20.2",
    "better-sqlite3": "^9.0.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
EOF

echo "âœ“ package.json ready"
echo ""

# STEP 3: Install dependencies
echo "[3/5] Installing dependencies..."
echo "  (ini mungkin memakan waktu 1-3 menit...)"
npm install --legacy-peer-deps

echo ""
echo "âœ“ Dependencies installed"
echo ""

# STEP 4: Recap file yang harus dicopy
echo "[4/5] File yang harus dicopy ke folder:"
echo "========================================="
echo ""
echo "âœ“ server.js              â†’ Root folder"
echo "âœ“ views/login.ejs        â†’ Folder views/"
echo "âœ“ views/dashboard.ejs    â†’ Folder views/"
echo "âœ“ public/style.css       â†’ Folder public/"
echo "âœ“ public/script.js       â†’ Folder public/"
echo ""
echo "âš  CATATAN: Semua file sudah disediakan dalam artifacts di atas"
echo "           Copy-paste ke folder yang sesuai"
echo ""

# STEP 5: Ready to run
echo "[5/5] Siap untuk menjalankan!"
echo "========================================="
echo ""
echo "ğŸš€ Untuk menjalankan server:"
echo ""
echo "   $ npm start"
echo ""
echo "  Output yang diharapkan:"
echo "  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "  â•‘  DARSINURSE GATEWAY - RUNNING          â•‘"
echo "  â•‘  Server: http://localhost:3000         â•‘"
echo "  â•‘  Database: darsinurse.db               â•‘"
echo "  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "AKSES APLIKASI:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸŒ URL: http://localhost:3000"
echo ""
echo "ğŸ“‹ LOGIN CREDENTIALS (Demo):"
echo "   ID Perawat: P001"
echo "   Password:   pass123"
echo ""
echo "ğŸ‘¥ Pasien untuk testing:"
echo "   PAT001 - Budi Santoso"
echo "   PAT002 - Susi Handini"
echo "   PAT003 - Rudi Hermawan"
echo "   PAT004 - Ani Wijaya"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "DEBUGGING & LOGS:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ“Š View database records (SQLite):"
echo "   $ sqlite3 darsinurse.db"
echo "   > SELECT * FROM pengukuran;"
echo ""
echo "ğŸ“ Browser console:"
echo "   Buka di aplikasi â†’ F12 â†’ Console Tab"
echo "   Lihat activity log di dashboard"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "FILE STRUCTURE FINAL:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "darsinurse-gateway/"
echo "â”œâ”€â”€ server.js                    â† Express backend"
echo "â”œâ”€â”€ package.json                 â† Dependencies"
echo "â”œâ”€â”€ darsinurse.db                â† SQLite (auto-created)"
echo "â”œâ”€â”€ node_modules/                â† Installed packages"
echo "â”œâ”€â”€ views/"
echo "â”‚   â”œâ”€â”€ login.ejs                â† Login page"
echo "â”‚   â””â”€â”€ dashboard.ejs            â† Main dashboard"
echo "â””â”€â”€ public/"
echo "    â”œâ”€â”€ style.css                â† Styling"
echo "    â””â”€â”€ script.js                â† Web Bluetooth logic"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "NEXT: Copy file-file dari artifacts, lalu jalankan npm start"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""